
gFTP FAQ

Brian Masney

This document is intended to answer questions that are likely to be frequently
asked by users of gFTP.

-------------------------------------------------------------------------------

  Table of Contents

  1. General_Information


        1.1. What_are_the_requirements_to_run_gFTP?

        1.2. How_do_I_install_gFTP?

        1.3. What_systems_is_gFTP_known_to_run_on?

        1.4. Does_gFTP_have_a_CVS_repository?

        1.5. How_do_I_report_bugs_in_gFTP?

        1.6. How_do_I_force_running_the_text_or_gtk+_version_of_gFTP?

        1.7. Is_there_a_way_for_gFTP_to_download_a_bunch_of_files/directories
        and_then_exit_when_it's_completed?

        1.8. In_the_GTK+_version_of_gFTP,_do_I_have_to_enter_a_port,_username
        and_password_to_connect_to_a_ftp_server?

        1.9. Where_does_gFTP_store_it's_options?

        1.10. Why_aren't_the_file_sizes_comma_separated?

        1.11. When_using_an_external_editor,_gFTP_does_not_detect_changes_that
        are_being_made_to_the_file.

        1.12. How_can_I_increase_the_size_of_the_fonts_in_gFTP?

        1.13. I_can't_transfer_certain_file_types_in_binary_mode_using_the_FTP
        protocol.


  2. FTP_Protocol


        2.1. When_gFTP_tries_to_get_the_remote_directory_listing,_the_remote
        server_complains_about_either_the_-a_or_-L_argument_to_LIST.

        2.2. When_gFTP_tries_to_get_the_remote_directory_listing,_I_receive_the
        error:_Cannot_create_a_data_connection:_Connection_refused


  4. SSH_Protocol


        4.1. I'm_having_problems_getting_SSH2_transfers_to_work._I_keep_getting
        the_error:_Error:_Message_size_XXXXXXXX_too_big_from_server

        4.2. What_is_the_difference_between_the_SSH_and_SSH2_protocols?


  5. SSL_Issues


        5.1. When_using_the_FTPS_or_HTTPS_protocol,_gFTP_cannot_connect_if_the
        remote_server_uses_a_self_signed_certificate.



-------------------------------------------------------------------------------

Chapter 1. General Information


1.1. What are the requirements to run gFTP?

* GTK 2.24 or higher / Glib 2.32 or higher. 

-------------------------------------------------------------------------------

1.2. How do I install gFTP?

* Go to the gftp-<version> directory and type
  ./configure
  make install
  The configure script will generate a Makefile for your machine, and make will
  compile a binary for your machine. By default, when you run configure, it
  will install gFTP with the prefix /usr/local, so the gFTP binary will be /
  usr/local/bin/gftp. You can change this by typing configure --prefix=/usr,
  and it will then install the gFTP binary to /usr/bin/gftp.

-------------------------------------------------------------------------------

1.3. What systems is gFTP known to run on?

It should run under any Linux distribution. 

If gFTP compiles and runs on a platform not listed here, please go to
https://github.com/masneyb/gftp/ and notify us.
If you are having problems compiling GTK+ or gFTP on another platform,
try using GNU make instead of your vendor supplied make.

-------------------------------------------------------------------------------

1.4. Does gFTP have a CVS repository?

https://github.com/masneyb/gftp/

-------------------------------------------------------------------------------

1.5. How do I report bugs in gFTP?

https://github.com/masneyb/gftp/issues

If you find ANY bugs in gFTP, please check to make sure that you are using the
latest version of gFTP. 
When sending in bug reports, please try to be as descriptive as
possible: what OS/version you are running, what compiler you are
compiling with, the output of gftp --info and any other important information.
If you get gFTP to crash, it would be very helpful if you could send me a
backtrace.

-------------------------------------------------------------------------------

1.6. How do I force running the text or gtk+ version of gFTP?

To run the text port, you can type gftp-text or to run the gtk+ port, you can
run the gftp-gtk. The gftp command is just a shell script that checks if your
DISPLAY variable is set, and if so it'll run the appropriate version.
-------------------------------------------------------------------------------

1.7. Is there a way for gFTP to download a bunch of files/directories and then
exit when it's completed?

Yes, the text port of gFTP supports this well. You can type:
gftp-text -d ftp://ftp.somesite.com/someplace
If someplace is a directory, it'll automatically download all of its
subdirectories as well. If you want to transfer a file through ssh instead of
ftp, just change the ftp:// to ssh://.
-------------------------------------------------------------------------------

1.8. In the GTK+ version of gFTP, do I have to enter a port, username and
password to connect to a ftp server?

No you don't. If you leave the port blank, it'll default to the default port
for the protocol you selected (port 21 for FTP). If you leave the username
blank, it will default to logging in as anonymous.
-------------------------------------------------------------------------------

1.9. Where does gFTP store it's options?

gFTP will automatically create a ~/.gftp directory when it is first run. Your
config file is ~/.gftp/gftprc, and this is where all of gFTP's settings are
stored. The config file is well commented, so take a glance at it and see if
there is anything you want to change. Your bookmarks are stored in the file
~/.gftp/bookmarks.
Every time gFTP is run, it will log the contents of the log window to ~/.gftp/
gftp.log. The contents of this file will be automatically purged this file when
gFTP is started up.
-------------------------------------------------------------------------------

1.10. Why aren't the file sizes comma separated?

If gFTP was compiled with _GNU_SOURCE defined (run gftp --info), then gFTP will
use the printf() modifier %'ld. If your LANG environment is set to C, then no
commas will be inserted. If you are in the US, change your LANG environment
variable to en_US.
-------------------------------------------------------------------------------

1.11. When using an external editor, gFTP does not detect changes that are
being made to the file.

Look at the man page for the editor you are using and see if there is a command
line argument to have the editor run in the foreground (it won't fork to detact
from the current terminal). If you are using one of the graphical VIM editors,
you can add the --nofork argument.
-------------------------------------------------------------------------------

1.12. How can I increase the size of the fonts in gFTP?

You can use the gnome-font-properties program to change the fonts used by all
GTK+ 2.x applications.
-------------------------------------------------------------------------------

1.13. I can't transfer certain file types in binary mode using the FTP
protocol.

Edit your ~/.gftp/gftprc file and look at the ext= lines towards the bottom of
the file. These lines control what icon is used for each file type. It also
controls what mode is used for the file transfer. For example, to transfer all
HTML files as binary, change the following two lines:
ext=.htm:world.xpm:A:
ext=.html:world.xpm:A:
to the following:
ext=.htm:world.xpm:B:
ext=.html:world.xpm:B:
-------------------------------------------------------------------------------


Chapter 2. FTP Protocol


2.1. When gFTP tries to get the remote directory listing, the remote server
complains about either the -a or -L argument to LIST.

If the server is complaining about the -L option, go under FTP->Options->FTP
and disable resolve remote symlinks. If it is complaining about the -a option,
go to FTP->Options->General and disable show hidden files.

-------------------------------------------------------------------------------

2.2. When gFTP tries to get the remote directory listing, I receive the error:
Cannot create a data connection: Connection refused

Go under FTP->Options->FTP and turn off passive file transfers. Instead of
sending the PASV command to open up the data connection on the server side, the
data connection will be opened up on the client side, and the PORT command will
be sent to the server instead.

-------------------------------------------------------------------------------


Chapter 4. SSH Protocol


4.1. I'm having problems getting SSH2 transfers to work. I keep getting the
error: Error: Message size XXXXXXXX too big from server

Note: This answer only applies to versions of gFTP <= 2.0.17
What probably is the problem, sftp-server isn't in your path on the remote
server. When you try to connect to the remote server, you'll see the command
gFTP is trying to run, and it'll look something like:
ssh -e none -l username hostname "echo -n xsftp ; sftp-server"
Try running this command. If you get a prompt asking:
The authenticity of host 'hostname (###.###.###.###)' can't be established.
RSA key fingerprint is xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx.
Are you sure you want to continue connecting (yes/no)?
Tell it yes. gFTP won't even try to answer this question for you at the moment.
Then, if you get the following output:
Enter passphrase for key '/home/brian/.ssh/id_dsa':
xsftp
bash: sftp-server: command not found
You'll have to set the path to the sftp-server program. Alternatively you could
go under FTP->Options->SSH and enable Use sftp subsys. If you enable this, then
you don't have to know the remote path to your sftp executable. But if you
enable this, gFTP won't be able to send your password over to the ssh client.
So if you're not using ssh-agent, then ssh will spawn the ssh-askpass program
to grab your password.

-------------------------------------------------------------------------------

4.2. What is the difference between the SSH and SSH2 protocols?

Note: This answer only applies to versions of gFTP <= 2.0.15
The SSH protocol uses sftp >= 0.7 from http://www.xbill.org/sftp. SSH2 uses the
native file transfers found in the commercial SSH2 and in later versions of
OpenSSH. The SSH2 protocol uses the sftp-server executable on the remote host
and the SSH protocol uses the sftpserv executable.
Note: Due to confusion, the origional SSH protocol was removed in gFTP 2.0.15.
It is not shown in gFTP 2.0.14, but there is a config option called
enable_old_ssh to enable this protocol.

-------------------------------------------------------------------------------


Chapter 5. SSL Issues


5.1. When using the FTPS or HTTPS protocol, gFTP cannot connect if the remote
server uses a self signed certificate.

You must add the public key of your self signed CA to your OpenSSL certs
directory. On my Debian box, the OpenSSL certs are installed in /usr/lib/ssl/
certs.

